<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title th:text="'Diff for '+${path}+' in '+${commit}">Diff</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/codemirror.min.js"></script>
  <link rel="stylesheet" media="all" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/codemirror.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/addon/search/searchcursor.min.js"></script>
  <script src="/mergely.js" type="text/javascript"></script>
  <link rel="stylesheet" media="all" href="/mergely.css" />
  <link type="text/css" rel="stylesheet" href="/ruletool.css" />
  
  <script type="text/javascript" th:inline="javascript">//<![CDATA[
$(document).ready(function () {
    $('#mergely').mergely({
		fadein: '',
		cmsettings: { readOnly: true },
        lhs: function(setValue) {
            setValue([[${oldFileContent}]]);
        },
        rhs: function(setValue) {
            setValue([[${newFileContent}]]);
        },
        loaded: function() {
          window.setTimeout(function() {
            $('#mergely').mergely('scrollTo', 'rhs', [(${line})]);
          });
        }
    });
});
  //]]></script>
</head>
<body>
  <p><b>Commit:</b> <a th:href="'/commit/'+${commit}" th:text="${commit}" target="_blank">Commit</a><br/>
      <span th:text="${commitTime}"></span><br/>
      <i><span th:text="${commitMsg}"></i></span></p>
  <p><b>Path:</b> <span th:text="${path}+' : '+${line}+' ('+${changeType}+')'"></span></p>
  <p><b>Previous:</b> <a th:text="${prevCommit}+', '+${prevPath}" th:href="'/diff/'+${prevCommit}+'/'+${prevPath}"></a></p>
  
  <div>
    <div class="mergely-resizer">
      <div id="mergely"></div>
    </div>
  </div>
</body>
</html>
